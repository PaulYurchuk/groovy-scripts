def group = "GroupID"
def artifact = "ArtifactId"
def version = "2"

def repository = "project-releases"
def myFile = new File ("/opt/jenkins/master2/workspace/nexusupload/custom-art-name-23.tar.gz")

def urlString = "http://nexus:8081/repository/${repository}/${group}/${artifact}/${version}/${artifact}-${version}.tar.gz"
def url = new URL(urlString) 
def connection = url.openConnection() 
connection.setRequestMethod("PUT")

//Authentication section
def basicAuth = "jenkins:jenkins".bytes.encodeBase64().toString()

//Property section
connection.setRequestProperty("Authorization", "Basic ${basicAuth}")
connection.setRequestMethod("PUT")
connection.setRequestProperty("Content-Type", "application/gzip");


//Connect and output
connection.doOutput = true 
def writer = new OutputStreamWriter(connection.outputStream) 
writer.write(myFile) 
writer.flush() 
writer.close() 
connection.connect() 


//Check response code
assert connection.responseCode == 201


